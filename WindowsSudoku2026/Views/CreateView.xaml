<UserControl x:Class="WindowsSudoku2026.Views.CreateView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:WindowsSudoku2026.Views"
             xmlns:controls="clr-namespace:WindowsSudoku2026.Controls" 
             xmlns:viewmodels="clr-namespace:WindowsSudoku2026.ViewModels" 
             xmlns:converters="clr-namespace:WindowsSudoku2026.Core.Converters;assembly=WindowsSudoku2026.Core"
             xmlns:utils="clr-namespace:WindowsSudoku2026.Common.Utils;assembly=WindowsSudoku2026.Common"
             d:DataContext="{d:DesignInstance Type=viewmodels:CreateViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="1000" d:DesignWidth="800">
    <UserControl.InputBindings>

        <KeyBinding Key="Delete" Modifiers="Ctrl" Command="{Binding UpdateRemovalsCommand}"/>
        <KeyBinding Key="Delete" Modifiers="Shift" Command="{Binding UpdateRemovalsCommand}"/>
        <KeyBinding Key="Delete" Command="{Binding UpdateRemovalsCommand}"/>

        <KeyBinding Key="Backspace" Modifiers="Ctrl" Command="{Binding UpdateRemovalsCommand}"/>
        <KeyBinding Key="Backspace" Modifiers="Shift" Command="{Binding UpdateRemovalsCommand}"/>
        <KeyBinding Key="Backspace" Command="{Binding UpdateRemovalsCommand}"/>
    </UserControl.InputBindings>
    <UserControl.Resources>
        <converters:EnumToBooleanConverter x:Key="EnumToBooleanConverter"/>
    </UserControl.Resources>
    <WrapPanel Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center">
        <Border x:Name="SudokuBorder" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" 
                Margin="20" 
                MinWidth="450" MinHeight="450" 
                MaxHeight="500" MaxWidth="500">
            <controls:SudokuBoardControl x:Name="SudokuBoard"
                                         SelectionBrush="Purple" 
                                         GameMode="{Binding GameMode}"
                                         IsSolverMode="False"
                                         Puzzle="{Binding GameServiceV2.CurrentPuzzle, Mode=TwoWay}" 
                                         DigitInputAsIntCommand="{Binding UpdateButtonCommand}" 
                                         Focusable="True" />
        </Border>
        <Border MinWidth="450" MaxWidth="500" Margin="30 0">
            <Border x:Name="NumPadBorder" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center" 
                    MinWidth="200" MaxWidth="280" 
                    MinHeight="250" MaxHeight="350">
                <Grid ShowGridLines="True" Margin="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition MinWidth="50" MaxWidth="70"/>
                        <ColumnDefinition MinWidth="50" MaxWidth="70"/>
                        <ColumnDefinition MinWidth="50" MaxWidth="70"/>
                        <ColumnDefinition MinWidth="50" MaxWidth="70"/>
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition MinHeight="50" MaxHeight="70"/>
                        <RowDefinition MinHeight="50" MaxHeight="70"/>
                        <RowDefinition MinHeight="50" MaxHeight="70"/>
                        <RowDefinition MinHeight="50" MaxHeight="70"/>
                        <RowDefinition MinHeight="50" MaxHeight="70"/>
                    </Grid.RowDefinitions>

                    <Button Grid.Row="0" Grid.Column="0" Focusable="False" MinWidth="40" MaxWidth="60" MinHeight="40" MaxHeight="60" Margin="5" Style="{DynamicResource CommonButtonStyle}">
                        <!--This file is NOT compatible with Silverlight-->
                        <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Stretch="Uniform">
                            <Canvas Name="UndoSVG" Width="640" Height="640">
                                <Canvas.RenderTransform>
                                    <TranslateTransform X="0" Y="0"/>
                                </Canvas.RenderTransform>
                                <Canvas.Resources/>
                                <!--Unknown tag: sodipodi:namedview-->
                                <Path xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Name="Undo" Fill="#fff">
                                    <Path.Data>
                                        <PathGeometry Figures="M88 256L232 256C241.7 256 250.5 250.2 254.2 241.2C257.9 232.2 255.9 221.9 249 215L202.3 168.3C277.6 109.7 386.6 115 455.8 184.2C530.8 259.2 530.8 380.7 455.8 455.7C380.8 530.7 259.3 530.7 184.3 455.7C174.1 445.5 165.3 434.4 157.9 422.7C148.4 407.8 128.6 403.4 113.7 412.9C98.8 422.4 94.4 442.2 103.9 457.1C113.7 472.7 125.4 487.5 139 501C239 601 401 601 501 501C601 401 601 239 501 139C406.8 44.7 257.3 39.3 156.7 122.8L105 71C98.1 64.2 87.8 62.1 78.8 65.8C69.8 69.5 64 78.3 64 88L64 232C64 245.3 74.7 256 88 256z" FillRule="NonZero"/>
                                    </Path.Data>
                                </Path>
                            </Canvas>
                        </Viewbox>
                    </Button>
                    <Button Grid.Row="1" Grid.Column="0" Focusable="False" MinWidth="40" MaxWidth="60" MinHeight="40" MaxHeight="60" Margin="5" Style="{DynamicResource CommonButtonStyle}">
                        <!--This file is NOT compatible with Silverlight-->
                        <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Stretch="Uniform">
                            <Canvas Name="RedoSVG" Width="640" Height="640">
                                <Canvas.RenderTransform>
                                    <TranslateTransform X="0" Y="0"/>
                                </Canvas.RenderTransform>
                                <Canvas.Resources/>
                                <!--Unknown tag: sodipodi:namedview-->
                                <Path xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Name="Redo" Fill="#fff">
                                    <Path.Data>
                                        <PathGeometry Figures="M552 256L408 256C398.3 256 389.5 250.2 385.8 241.2C382.1 232.2 384.1 221.9 391 215L437.7 168.3C362.4 109.7 253.4 115 184.2 184.2C109.2 259.2 109.2 380.7 184.2 455.7C259.2 530.7 380.7 530.7 455.7 455.7C463.9 447.5 471.2 438.8 477.6 429.6C487.7 415.1 507.7 411.6 522.2 421.7C536.7 431.8 540.2 451.8 530.1 466.3C521.6 478.5 511.9 490.1 501 501C401 601 238.9 601 139 501C39.1 401 39 239 139 139C233.3 44.7 382.7 39.4 483.3 122.8L535 71C541.9 64.1 552.2 62.1 561.2 65.8C570.2 69.5 576 78.3 576 88L576 232C576 245.3 565.3 256 552 256z" FillRule="NonZero"/>
                                    </Path.Data>
                                </Path>
                            </Canvas>
                        </Viewbox>
                    </Button>
                    <Button Grid.Row="2" Grid.Column="0" 
                            Focusable="False"  
                            MinWidth="40" MaxWidth="60" 
                            MinHeight="40" MaxHeight="60"
                            Margin="5" 
                            Style="{DynamicResource CommonButtonStyle}"
                            Command="{Binding SolveCommand}">
                        <!--This file is NOT compatible with Silverlight-->
                        <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Stretch="Uniform">
                            <Canvas Name="CheckSVG" Width="640" Height="640">
                                <Canvas.RenderTransform>
                                    <TranslateTransform X="0" Y="0"/>
                                </Canvas.RenderTransform>
                                <Canvas.Resources/>
                                <!--Unknown tag: sodipodi:namedview-->
                                <Path xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Name="Check" Fill="#fff">
                                    <Path.Data>
                                        <PathGeometry Figures="M530.8 134.1C545.1 144.5 548.3 164.5 537.9 178.8L281.9 530.8C276.4 538.4 267.9 543.1 258.5 543.9C249.1 544.7 240 541.2 233.4 534.6L105.4 406.6C92.9 394.1 92.9 373.8 105.4 361.3C117.9 348.8 138.2 348.8 150.7 361.3L252.2 462.8L486.2 141.1C496.6 126.8 516.6 123.6 530.9 134z" FillRule="NonZero"/>
                                    </Path.Data>
                                </Path>
                            </Canvas>
                        </Viewbox>
                    </Button>
                    <Button Grid.Row="3" Grid.Column="0" Focusable="False"  MinWidth="40" MaxWidth="60" MinHeight="40" MaxHeight="60" Margin="5" Content="Select" />

                    <Button Grid.Row="2" Grid.Column="1" Style="{DynamicResource DefaultButtonStyleV2}" Content="1" Command="{Binding UpdateButtonCommand}" CommandParameter="1" />
                    <Button Grid.Row="2" Grid.Column="2" Style="{DynamicResource DefaultButtonStyleV2}" Content="2" Command="{Binding UpdateButtonCommand}" CommandParameter="2" />
                    <Button Grid.Row="2" Grid.Column="3" Style="{DynamicResource DefaultButtonStyleV2}" Content="3" Command="{Binding UpdateButtonCommand}" CommandParameter="3" />

                    <Button Grid.Row="1" Grid.Column="1" Style="{DynamicResource DefaultButtonStyleV2}" Content="4" Command="{Binding UpdateButtonCommand}" CommandParameter="4" />
                    <Button Grid.Row="1" Grid.Column="2" Style="{DynamicResource DefaultButtonStyleV2}" Content="5" Command="{Binding UpdateButtonCommand}" CommandParameter="5" />
                    <Button Grid.Row="1" Grid.Column="3" Style="{DynamicResource DefaultButtonStyleV2}" Content="6" Command="{Binding UpdateButtonCommand}" CommandParameter="6" />

                    <Button Grid.Row="0" Grid.Column="1" Style="{DynamicResource DefaultButtonStyleV2}" Content="7" Command="{Binding UpdateButtonCommand}" CommandParameter="7" />
                    <Button Grid.Row="0" Grid.Column="2" Style="{DynamicResource DefaultButtonStyleV2}" Content="8" Command="{Binding UpdateButtonCommand}" CommandParameter="8" />
                    <Button Grid.Row="0" Grid.Column="3" Style="{DynamicResource DefaultButtonStyleV2}" Content="9" Command="{Binding UpdateButtonCommand}" CommandParameter="9" />

                    <Button Grid.Row="3" Grid.Column="1" Focusable="False"  MinWidth="40" MaxWidth="60" MinHeight="40" MaxHeight="60" Margin="5" Content="Palette" Command="{Binding GoBackCommand}"/>

                    <Button Grid.Row="3" Grid.Column="2" Grid.ColumnSpan="2" Focusable="False"  MinWidth="90" MaxWidth="130" MinHeight="40" MaxHeight="60" Height="60" Width="130" Margin="5"
                            Command="{Binding UpdateRemovalsCommand}"
                            Style="{DynamicResource CommonButtonStyle}">
                        <!--This file is NOT compatible with Silverlight-->
                        <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Stretch="Uniform">
                            <Canvas Name="EraseSVG" Width="640" Height="640">
                                <Canvas.RenderTransform>
                                    <TranslateTransform X="0" Y="0"/>
                                </Canvas.RenderTransform>
                                <Canvas.Resources/>
                                <!--Unknown tag: sodipodi:namedview-->
                                <Path xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Name="Erase" Fill="#fff">
                                    <Path.Data>
                                        <PathGeometry Figures="M210.5 480L333.5 480L398.8 414.7L225.3 241.2L98.6 367.9L210.6 479.9zM256 544L210.5 544C193.5 544 177.2 537.3 165.2 525.3L49 409C38.1 398.1 32 383.4 32 368C32 352.6 38.1 337.9 49 327L295 81C305.9 70.1 320.6 64 336 64C351.4 64 366.1 70.1 377 81L559 263C569.9 273.9 576 288.6 576 304C576 319.4 569.9 334.1 559 345L424 480L544 480C561.7 480 576 494.3 576 512C576 529.7 561.7 544 544 544L256 544z" FillRule="NonZero"/>
                                    </Path.Data>
                                </Path>
                            </Canvas>
                        </Viewbox>
                    </Button>

                    <Button x:Name="OpenCloseSettingsPanel"
                            Grid.Row="4" 
                            Grid.Column="1" 
                            Focusable="False" 
                            MinWidth="40" MaxWidth="60" MinHeight="40" MaxHeight="60"
                            Margin="5" 
                            Style="{DynamicResource CommonButtonStyle}"
                            Command="{Binding ToggleSettingsCommand}">

                        <!--This file is NOT compatible with Silverlight-->
                        <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Stretch="Uniform">
                            <Canvas Name="SettingsSVG" Width="640" Height="640">
                                <Canvas.RenderTransform>
                                    <TranslateTransform X="0" Y="0"/>
                                </Canvas.RenderTransform>
                                <Canvas.Resources/>
                                <!--Unknown tag: sodipodi:namedview-->
                                <Path xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Name="Settings" Fill="#fff">
                                    <Path.Data>
                                        <PathGeometry Figures="M259.1 73.5C262.1 58.7 275.2 48 290.4 48L350.2 48C365.4 48 378.5 58.7 381.5 73.5L396 143.5C410.1 149.5 423.3 157.2 435.3 166.3L503.1 143.8C517.5 139 533.3 145 540.9 158.2L570.8 210C578.4 223.2 575.7 239.8 564.3 249.9L511 297.3C511.9 304.7 512.3 312.3 512.3 320C512.3 327.7 511.8 335.3 511 342.7L564.4 390.2C575.8 400.3 578.4 417 570.9 430.1L541 481.9C533.4 495 517.6 501.1 503.2 496.3L435.4 473.8C423.3 482.9 410.1 490.5 396.1 496.6L381.7 566.5C378.6 581.4 365.5 592 350.4 592L290.6 592C275.4 592 262.3 581.3 259.3 566.5L244.9 496.6C230.8 490.6 217.7 482.9 205.6 473.8L137.5 496.3C123.1 501.1 107.3 495.1 99.7 481.9L69.8 430.1C62.2 416.9 64.9 400.3 76.3 390.2L129.7 342.7C128.8 335.3 128.4 327.7 128.4 320C128.4 312.3 128.9 304.7 129.7 297.3L76.3 249.8C64.9 239.7 62.3 223 69.8 209.9L99.7 158.1C107.3 144.9 123.1 138.9 137.5 143.7L205.3 166.2C217.4 157.1 230.6 149.5 244.6 143.4L259.1 73.5zM320.3 400C364.5 399.8 400.2 363.9 400 319.7C399.8 275.5 363.9 239.8 319.7 240C275.5 240.2 239.8 276.1 240 320.3C240.2 364.5 276.1 400.2 320.3 400z" FillRule="NonZero"/>
                                    </Path.Data>
                                </Path>
                            </Canvas>
                        </Viewbox>
                    </Button>
                    <Button Grid.Row="4" Grid.Column="2" 
                            Focusable="False" 
                            MinWidth="40" MaxWidth="60" MinHeight="40" MaxHeight="60"
                            Margin="5" 
                            Style="{DynamicResource CommonButtonStyle}" 
                            Command="{Binding ToggleSavePuzzleDialogCommand}">
                        <!--This file is NOT compatible with Silverlight-->
                        <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Stretch="Uniform">
                            <Canvas Name="SaveSVG" Width="640" Height="640">
                                <Canvas.RenderTransform>
                                    <TranslateTransform X="0" Y="0"/>
                                </Canvas.RenderTransform>
                                <Canvas.Resources/>
                                <!--Unknown tag: sodipodi:namedview-->
                                <Path xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Name="Save" Fill="#fff">
                                    <Path.Data>
                                        <PathGeometry Figures="M160 96C124.7 96 96 124.7 96 160L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 237.3C544 220.3 537.3 204 525.3 192L448 114.7C436 102.7 419.7 96 402.7 96L160 96zM192 192C192 174.3 206.3 160 224 160L384 160C401.7 160 416 174.3 416 192L416 256C416 273.7 401.7 288 384 288L224 288C206.3 288 192 273.7 192 256L192 192zM320 352C355.3 352 384 380.7 384 416C384 451.3 355.3 480 320 480C284.7 480 256 451.3 256 416C256 380.7 284.7 352 320 352z" FillRule="NonZero"/>
                                    </Path.Data>
                                </Path>
                            </Canvas>
                        </Viewbox>
                    </Button>
                    <Button Grid.Row="4" Grid.Column="3" Focusable="False" MinWidth="40" MaxWidth="60" MinHeight="40" MaxHeight="60" Margin="5" Style="{DynamicResource CommonButtonStyle}">
                        <!--This file is NOT compatible with Silverlight-->
                        <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Stretch="Uniform">
                            <Canvas Name="RestartSVG" Width="640" Height="640">
                                <Canvas.RenderTransform>
                                    <TranslateTransform X="0" Y="0"/>
                                </Canvas.RenderTransform>
                                <Canvas.Resources/>
                                <!--Unknown tag: sodipodi:namedview-->
                                <Path xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Name="Restart" Fill="#fff">
                                    <Path.Data>
                                        <PathGeometry Figures="M320 128C426 128 512 214 512 320C512 426 426 512 320 512C254.8 512 197.1 479.5 162.4 429.7C152.3 415.2 132.3 411.7 117.8 421.8C103.3 431.9 99.8 451.9 109.9 466.4C156.1 532.6 233 576 320 576C461.4 576 576 461.4 576 320C576 178.6 461.4 64 320 64C234.3 64 158.5 106.1 112 170.7L112 144C112 126.3 97.7 112 80 112C62.3 112 48 126.3 48 144L48 256C48 273.7 62.3 288 80 288L104.6 288C105.1 288 105.6 288 106.1 288L192.1 288C209.8 288 224.1 273.7 224.1 256C224.1 238.3 209.8 224 192.1 224L153.8 224C186.9 166.6 249 128 320 128zM344 216C344 202.7 333.3 192 320 192C306.7 192 296 202.7 296 216L296 320C296 326.4 298.5 332.5 303 337L375 409C384.4 418.4 399.6 418.4 408.9 409C418.2 399.6 418.3 384.4 408.9 375.1L343.9 310.1L343.9 216z" FillRule="NonZero"/>
                                    </Path.Data>
                                </Path>
                            </Canvas>
                        </Viewbox>
                    </Button>
                </Grid>
            </Border>
        </Border>
    </WrapPanel>
</UserControl>
